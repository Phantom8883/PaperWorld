{# ============================================ #}
{# НАСЛЕДОВАНИЕ ОТ БАЗОВОГО ШАБЛОНА #}
{# ============================================ #}
{# extends - наследуемся от base.html #}
{# Все что в base.html будет здесь, но блок content заменится #}
{% extends "works/base.html" %}

{# ============================================ #}
{# БЛОК TITLE - заголовок страницы в <title> #}
{# ============================================ #}
{% block title %}Все произведения - PaperWorlds{% endblock %}

{# ============================================ #}
{# БЛОК CONTENT - основной контент страницы #}
{# ============================================ #}
{% block content %}
    <h1>Все произведения</h1>

    {# ============================================ #}
    {# ЦИКЛ ПО ПРОИЗВЕДЕНИЯМ #}
    {# ============================================ #}
    {# {% for work in works %} - цикл по списку произведений #}
    {# works - это переменная из views.py (work_list) #}
    {# {% empty %} - что показать, если список пустой #}
    {# {% endfor %} - конец цикла #}
    {% for work in works %}
        <article>
            {# ============================================ #}
            {# ЗАГОЛОВОК С ССЫЛКОЙ #}
            {# ============================================ #}
            <h2>
                {# <a href="..."> - обычная HTML ссылка #}
                {# {{ work.get_absolute_url }} - метод модели Work, возвращает URL #}
                <a href="{{ work.get_absolute_url }}">
                    {{ work.title }}
                </a>
            </h2>

            {# ============================================ #}
            {# ИНФОРМАЦИЯ О ПРОИЗВЕДЕНИИ #}
            {# ============================================ #}
            <p>
                {# {{ work.author }} - выводит автора (объект User) #}
                {# .username - атрибут модели User #}
                Автор: <strong>{{ work.author.username }}</strong>
            </p>

            <p>
                {# {{ work.description }} - краткое описание #}
                {{ work.description }}
            </p>

            <p>
                {# {{ work.created|date:"d.m.Y" }} - дата создания #}
                {# |date:"d.m.Y" - фильтр для форматирования даты #}
                {# d.m.Y = день.месяц.год (например: 20.01.2025) #}
                Создано: {{ work.created|date:"d.m.Y" }}
            </p>

            {# ============================================ #}
            {# ССЫЛКА "ЧИТАТЬ ДАЛЬШЕ" #}
            {# ============================================ #}
            <p>
                <a href="{{ work.get_absolute_url }}">Читать дальше →</a>
            </p>

            {# Горизонтальная линия между произведениями #}
            <hr>
        </article>
    {% empty %}
        {# Если произведений нет, показываем это сообщение #}
        <p>Пока нет опубликованных произведений.</p>
    {% endfor %}

    {# ============================================ #}
    {# ПАГИНАЦИЯ (разбивка на страницы) #}
    {# ============================================ #}
    {# works - это объект Page из Paginator #}
    {# .has_previous - есть ли предыдущая страница #}
    {# .has_next - есть ли следующая страница #}
    {# .previous_page_number - номер предыдущей страницы #}
    {# .next_page_number - номер следующей страницы #}
    {# .number - текущий номер страницы #}
    {# .paginator.num_pages - всего страниц #}
    <div class="pagination">
        {% if works.has_previous %}
            {# Ссылка на предыдущую страницу #}
            <a href="?page={{ works.previous_page_number }}">← Предыдущая</a>
        {% endif %}

        {# Текущая страница и всего страниц #}
        <span>
            Страница {{ works.number }} из {{ works.paginator.num_pages }}
        </span>

        {% if works.has_next %}
            {# Ссылка на следующую страницу #}
            <a href="?page={{ works.next_page_number }}">Следующая →</a>
        {% endif %}
    </div>
{% endblock %}

